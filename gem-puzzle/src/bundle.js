(()=>{"use strict";const e=function(e){let t=0;for(;0===t;){e.sort((()=>Math.random()-.5));let s=0;for(let t=0;t<14;t+=1){const a=e[t]+1;for(let n=t+1;n<=14;n+=1)a>e[n]+1&&(s+=1)}s+=4,s%2==0&&(t=1)}};let t=100,s=100,a=133,n=80,o=67,c=57,r=50;document.querySelector("body").offsetWidth>320&&document.querySelector("body").offsetWidth<400&&(t=80,s=80,a=107,n=64,o=53,c=46,r=40),document.body.innerHTML='<h1 class="title animate__animated animate__bounceInDown" id="title" ><img class="logo" src="assets/logo.png">Gem Puzzle</h1>';const l=document.createElement("div"),i=document.createElement("div"),d=document.createElement("div"),p=document.createElement("div"),m=document.createElement("div"),u=document.createElement("div"),g=document.createElement("audio"),x=document.createElement("div"),v=document.createElement("div"),f=document.createElement("div"),b=document.getElementById("title"),y=document.createElement("div");v.id="burgerWrapper",f.id="burger",y.className="mainPopup",document.body.append(l),document.body.append(g),document.body.append(x),document.body.append(y),b.append(v),v.append(f),l.append(i),i.append(m),i.append(d),l.append(p),l.className="container",i.className="wrapper",d.className="field animate__animated animate__bounceInLeft",p.className="menu animate__animated animate__bounceInRight",m.className="counter animate__animated animate__flipInX",x.className="record-table",g.id="audio",g.src="assets/1.mp3",p.innerHTML='<button class="btn" id="newGame">New game</button><button class="btn" id="pause">Pause</button><button class="btn" id="score">Score</button><div id="changeSize">Size<ul class="options" id="options"><li class="option">Classic</li><li class="option">3x3</li><li class="option">4x4</li><li class="option">5x5</li><li class="option">6x6</li><li class="option">7x7</li><li class="option">8x8</li></ul></div><button class="btn sound-btn" id="sound"></button>',m.innerHTML='<p class="time" id="time">Time: 00:00</p><p class="move">Move: 0</p>';const S=document.getElementById("sound");x.innerHTML='<h2 class="score-title">Score</h2><div class="score-table"></div>',S.innerHTML='<img src="assets/sound.png" class="sound-img">',d.append(u),u.className="popup",u.innerHTML='<h2>Click "New game"</h2>';const k=localStorage.getItem("classic")?JSON.parse(localStorage.getItem("classic")):["00:25","00:27","00:32","00:37","00:38","00:40","00:43","00:45","00:55","01:20"],h=localStorage.getItem("record3x3")?JSON.parse(localStorage.getItem("record3x3")):["00:05","00:10","00:12","00:20","00:27","00:30","00:31","00:32","00:35","00:45"],L=localStorage.getItem("record4x4")?JSON.parse(localStorage.getItem("record4x4")):["00:25","00:27","00:32","00:37","00:38","00:40","00:43","00:45","00:55","01:20"],I=localStorage.getItem("record5x5")?JSON.parse(localStorage.getItem("record5x5")):["01:20","01:27","01:32","01:37","01:38","01:40","01:42","01:45","01:48","01:55"],E=localStorage.getItem("record6x6")?JSON.parse(localStorage.getItem("record6x6")):["02:10","02:28","02:31","02:37","02:41","02:42","02:45","02:55","03:20","03:45"],N=localStorage.getItem("record7x7")?JSON.parse(localStorage.getItem("record7x7")):["04:12","04:25","04:53","05:10","05:37","05:41","05:41","05:45","05:55","06:20"],T=localStorage.getItem("record8x8")?JSON.parse(localStorage.getItem("record8x8")):["06:10","06:12","06:37","06:41","06:45","06:49","06:53","07:20","07:55","08:25"];localStorage.setItem("classic",JSON.stringify(k)),localStorage.setItem("record3x3",JSON.stringify(h)),localStorage.setItem("record4x4",JSON.stringify(L)),localStorage.setItem("record5x5",JSON.stringify(I)),localStorage.setItem("record6x6",JSON.stringify(E)),localStorage.setItem("record7x7",JSON.stringify(N)),localStorage.setItem("record8x8",JSON.stringify(T));let $={value:16,left:3,top:3},J=[];J.push($);let O=0,_=!1,w=!1,M=0,A=!0,H="classic";S.addEventListener("click",(()=>{A?(A=!1,S.innerHTML='<img src="assets/sound2.png" class="sound-img">'):(A=!0,S.innerHTML='<img src="assets/sound.png" class="sound-img">')}));const P=document.getElementById("time"),q=document.getElementById("newGame"),B=document.getElementById("pause"),C=document.getElementById("score"),j=new function(){let e,t,s=0;function a(){w&&(s+=function(){const e=Date.now(),s=e-t;return t=e,s}());const e=function(e){const t=new Date(e);let s=t.getMinutes().toString(),a=t.getSeconds().toString();return s.length<2&&(s="0"+s),a.length<2&&(a="0"+a),`${s}:${a}`}(s);P.textContent="Time: "+e,M=e}this.start=function(){w||(e=setInterval(a.bind(this),10),t=Date.now(),w=!0)},this.stop=function(){w&&(clearInterval(e),e=null,w=!1)},this.reset=function(){s=0,a()}}(P),z=document.querySelector(".score-table"),D=document.createElement("div"),W=document.createElement("ul");D.className="column",W.className="recordList",z.append(D),D.append(W);for(let e=0;e<10;e+=1){const e=document.createElement("li");e.className="recordListItem",W.append(e)}const G=()=>{const e=document.querySelectorAll(".recordListItem");for(let t=0;t<e.length;t+=1)switch(H){case"classic":e[t].innerText="",k.sort(),e[t].innerText=""+k[t];break;case"3x3":e[t].innerText="",h.sort(),e[t].innerText=""+h[t];break;case"4x4":e[t].innerText="",L.sort(),e[t].innerText=""+L[t];break;case"5x5":e[t].innerText="",I.sort(),e[t].innerText=""+I[t];break;case"6x6":e[t].innerText="",E.sort(),e[t].innerText=""+E[t];break;case"7x7":e[t].innerText="",N.sort(),e[t].innerText=""+N[t];break;case"8x8":e[t].innerText="",T.sort(),e[t].innerText=""+T[t];break;default:e[t].innerText="",k.sort(),e[t].innerText=""+k[t]}};function R(e,t,s,a){O+=1;const n=J[e+1];if(Math.abs($.left-n.left)+Math.abs($.top-n.top)>1)return;document.querySelector(".move").innerHTML="Move: "+O,n.element.style.left=$.left*t+"px",n.element.style.top=$.top*t+"px";const o=$.left,c=$.top;$.left=n.left,$.top=n.top,n.left=o,n.top=c,J.every((e=>e.position===`${e.left}${e.top}`))&&(document.querySelector(".popup").classList.remove("popup-inactive"),u.innerHTML=`<h2>You Win!<br>With: ${M} and ${O} moves</h2>}`,d.className="field animate__animated animate__rubberBand",j.stop(),_=!1,((e,t)=>{switch(t.some((e=>M<e))&&t.every((e=>M!==e))&&t.push(M),t.sort(),t.splice(10),e){case"classic":localStorage.setItem("classic",JSON.stringify(t));break;case"record3x3":localStorage.setItem("record3x3",JSON.stringify(t));break;case"record4x4":localStorage.setItem("record4x4",JSON.stringify(t));break;case"record5x5":localStorage.setItem("record5x6",JSON.stringify(t));break;case"record6x6":localStorage.setItem("record6x6",JSON.stringify(t));break;case"record7x7":localStorage.setItem("record7x8",JSON.stringify(t));break;case"record8x8":localStorage.setItem("record8x8",JSON.stringify(t));break;default:localStorage.setItem(e,JSON.stringify(t))}})(s,a),G()),A?g.play():g.pause()}G();const X=[...Array(15).keys()],Y=[...Array(8).keys()],F=[...Array(24).keys()],K=[...Array(35).keys()],Q=[...Array(48).keys()],U=[...Array(63).keys()],V=new function(){this.classic=function(){J=[],$={value:16,position:"33",left:3,top:3},J.push($);for(let e=0;e<=14;e+=1){const s=document.createElement("div");d.append(s),s.className="cell",s.setAttribute("draggable",!0);const a=X[e]+1;s.innerHTML=a;const n=e%4,o=(e-n)/4,c=(a-1)%4,r=`${c}${(a-1-c)/4}`;J.push({value:a,position:r,left:n,top:o,element:s}),s.style.left=n*t+"px",s.style.top=o*t+"px",s.addEventListener("click",(()=>{R(e,t,"classic",k)}))}},this.create3x3=function(){J=[],$={value:9,position:"22",left:2,top:2},J.push($);for(let e=0;e<=7;e+=1){const t=document.createElement("div");d.append(t),t.className="cell cell3x3",t.setAttribute("draggable",!0),t.style.border="none",t.style.backgroundImage=`url("./assets/photo3x3/${Y[e]}.jpg")`;const s=Y[e]+1,n=e%3,o=(e-n)/3,c=(s-1)%3,r=`${c}${(s-1-c)/3}`;J.push({value:s,position:r,left:n,top:o,element:t}),t.style.left=n*a+"px",t.style.top=o*a+"px",t.addEventListener("click",(()=>{R(e,a,"record3x3",h)}))}},this.create4x4=function(){J=[],$={value:16,position:"33",left:3,top:3},J.push($);for(let e=0;e<=14;e+=1){const t=document.createElement("div");d.append(t),t.className="cell",t.setAttribute("draggable",!0),t.style.border="none";const a=X[e]+1;t.style.backgroundImage=`url("./assets/photo4x4/${X[e]}.jpg")`;const n=e%4,o=(e-n)/4,c=(a-1)%4,r=`${c}${(a-1-c)/4}`;J.push({value:a,position:r,left:n,top:o,element:t}),t.style.left=n*s+"px",t.style.top=o*s+"px",t.addEventListener("click",(()=>{R(e,s,"record4x4",L)}))}},this.create5x5=function(){J=[],$={value:25,position:"44",left:4,top:4},J.push($);for(let e=0;e<=23;e+=1){const t=document.createElement("div");d.append(t),t.className="cell cell5x5",t.setAttribute("draggable",!0),t.style.border="none",t.style.backgroundImage=`url("./assets/photo5x5/${F[e]}.jpg")`;const s=F[e]+1,a=e%5,o=(e-a)/5,c=(s-1)%5,r=`${c}${(s-1-c)/5}`;J.push({value:s,position:r,left:a,top:o,element:t}),t.style.left=a*n+"px",t.style.top=o*n+"px",t.addEventListener("click",(()=>{R(e,n,"record5x5",I)}))}},this.create6x6=function(){J=[],$={value:36,position:"55",left:5,top:5},J.push($);for(let e=0;e<=34;e+=1){const t=document.createElement("div");d.append(t),t.className="cell cell6x6",t.setAttribute("draggable",!0),t.style.border="none",t.style.backgroundImage=`url("./assets/photo6x6/${K[e]}.jpg")`;const s=K[e]+1,a=e%6,n=(e-a)/6,c=(s-1)%6,r=`${c}${(s-1-c)/6}`;J.push({value:s,position:r,left:a,top:n,element:t}),t.style.left=a*o+"px",t.style.top=n*o+"px",t.addEventListener("click",(()=>{R(e,o,"record6x6",E)}))}},this.create7x7=function(){J=[],$={value:49,position:"66",left:6,top:6},J.push($);for(let e=0;e<=47;e+=1){const t=document.createElement("div");d.append(t),t.className="cell cell7x7",t.setAttribute("draggable",!0),t.style.border="none",t.style.backgroundImage=`url("./assets/photo7x7/${Q[e]}.jpg")`;const s=Q[e]+1,a=e%7,n=(e-a)/7,o=(s-1)%7,r=`${o}${(s-1-o)/7}`;J.push({value:s,position:r,left:a,top:n,element:t}),t.style.left=a*c+"px",t.style.top=n*c+"px",t.addEventListener("click",(()=>{R(e,c,"record7x7",N)}))}},this.create8x8=function(){J=[],$={value:64,position:"77",left:7,top:7},J.push($);for(let e=0;e<=62;e+=1){const t=document.createElement("div");d.append(t),t.className="cell cell8x8",t.setAttribute("draggable",!0),t.style.border="none",t.style.backgroundImage=`url("./assets/photo8x8/${U[e]}.jpg")`;const s=U[e]+1,a=e%8,n=(e-a)/8,o=(s-1)%8,c=`${o}${(s-1-o)/8}`;J.push({value:s,position:c,left:a,top:n,element:t}),t.style.left=a*r+"px",t.style.top=n*r+"px",t.addEventListener("click",(()=>{R(e,r,"record8x8",T)}))}}},Z=document.getElementById("changeSize"),ee=document.getElementById("options");Z.addEventListener("click",(()=>{ee.classList.toggle("options-active")})),Z.onmouseleave=function(){ee.classList.remove("options-active")},G(),ee.addEventListener("click",(e=>{const{target:t}=e;switch(t.textContent){case"classic":H="classic",q.click(),G();break;case"3x3":H="3x3",q.click(),G();break;case"4x4":H="4x4",q.click(),G();break;case"5x5":H="5x5",q.click(),G();break;case"6x6":H="6x6",q.click(),G();break;case"7x7":H="7x7",q.click(),G();break;case"8x8":H="8x8",q.click(),G();break;default:H="classic",q.click(),G()}}));const te=()=>{let e=0;const t=document.querySelectorAll(".cell"),s=function(){setTimeout((()=>{this.classList.add("hide")}),0)},a=function(){this.classList.remove("hide"),this.click()};for(e=0;e<t.length;e+=1)t[e].addEventListener("dragstart",s),t[e].addEventListener("dragend",a);d.addEventListener("dragover",(function(e){e.preventDefault()})),d.addEventListener("drop",(function(){}))};V.classic(),B.addEventListener("click",(()=>{!1!==_&&(w?(j.stop(),B.textContent="Resume",document.querySelector(".popup").classList.remove("popup-inactive"),u.innerHTML="<h2>Pause</h2>"):(j.start(),B.textContent="Pause",document.querySelector(".popup").classList.add("popup-inactive")),p.classList.remove("menu-active"),y.classList.remove("mainPopup-active"))})),q.addEventListener("click",(()=>{switch(document.querySelector(".popup").classList.add("popup-inactive"),p.classList.remove("menu-active"),y.classList.remove("mainPopup-active"),d.className="field animate__animated ",j.reset(),d.innerHTML="",d.append(u),H){case"classic":e(X),V.classic();break;case"3x3":e(Y),V.create3x3();break;case"4x4":e(X),V.create4x4();break;case"5x5":e(F),V.create5x5();break;case"6x6":e(K),V.create6x6();break;case"7x7":e(Q),V.create7x7();break;case"8x8":e(U),V.create8x8();break;default:e(X),V.classic()}te(),O=0,document.querySelector(".move").innerHTML="Move: "+O,B.textContent="Pause",_=!0,w?(j.reset(),B.textContent="Pause"):(j.start(),w=!0)})),C.addEventListener("click",(()=>{x.classList.toggle("window-active"),document.addEventListener("click",(e=>{x.contains(e.target)||!x.classList.contains("window-active")||C.contains(e.target)||x.classList.remove("window-active")})),p.classList.remove("menu-active"),y.classList.remove("mainPopup-active")})),v.addEventListener("click",(()=>{p.classList.toggle("menu-active"),y.classList.toggle("mainPopup-active")})),y.addEventListener("click",(()=>{p.classList.remove("menu-active"),y.classList.remove("mainPopup-active")}))})();